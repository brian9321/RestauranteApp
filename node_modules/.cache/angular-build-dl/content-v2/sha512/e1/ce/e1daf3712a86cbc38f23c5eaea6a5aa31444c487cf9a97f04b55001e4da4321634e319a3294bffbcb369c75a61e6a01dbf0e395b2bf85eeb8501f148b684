(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{F4UR:function(n,t,o){"use strict";o.r(t),o.d(t,"LoginPageModule",(function(){return h}));var e=o("ofXK"),i=o("3Pt+"),r=o("TEn/"),s=o("tyNb"),a=o("mrSG"),c=o("fXoL"),g=o("lGQG");const d=[{path:"",component:(()=>{class n{constructor(n,t,o,e){this.authService=n,this.toastController=t,this.loadingController=o,this.router=e,this.UserLogin={email:"cliente@gmail.com",password:"holamundo",gethash:"true"}}ngOnInit(){}ionViewWillEnter(){this.comprobarlogin()}comprobarlogin(){return Object(a.a)(this,void 0,void 0,(function*(){!0===(yield this.authService.checkLogin)&&this.router.navigate(["/home"])}))}loginuser(){return Object(a.a)(this,void 0,void 0,(function*(){this.presentLoading("Espere..");const n=this.UserLogin.email.trim();this.UserLogin.email=n,console.log(this.UserLogin),yield this.authService.login(this.UserLogin).subscribe(n=>Object(a.a)(this,void 0,void 0,(function*(){console.log(n),n<=1?(console.log(n),this.UserLogin.gethash="true",this.presentToast("Error en el servidor")):n.status||(this.user=n,this.UserLogin.gethash="",this.authService.login(this.UserLogin).subscribe(n=>{this.token=n,this.token.length<=0?this.presentToast("Error en el servidor"):(this.UserLogin.gethash="true",this.loading.dismiss(),this.CrearSesion())},n=>{this.errorMessage=n,null!=this.errorMessage&&(this.loading.dismiss(),this.UserLogin.gethash="true",this.presentToast("Error en el servidor"))}))})),n=>{})}))}CrearSesion(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.authService.setUser(this.user),yield this.authService.setToken(this.token),yield this.comprobarlogin()}))}presentToast(n){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:n,duration:5e3})).present()}))}presentLoading(n){return Object(a.a)(this,void 0,void 0,(function*(){return this.loading=yield this.loadingController.create({message:n,translucent:!0,cssClass:"custom-class custom-loading",backdropDismiss:!0,mode:"ios"}),this.loading.present()}))}}return n.\u0275fac=function(t){return new(t||n)(c.Jb(g.a),c.Jb(r.M),c.Jb(r.I),c.Jb(s.g))},n.\u0275cmp=c.Db({type:n,selectors:[["app-login"]],decls:23,vars:3,consts:[["mode","ios",1,"ion-no-border"],["slot","start"],["color","primary"],["icon","chevron-back","defaultHref","/"],["slot","end"],["color","primary","routerLink","/adduser"],["id","header"],["src","assets/logodx.png"],["id","form",3,"ngSubmit"],["form","ngForm"],[1,"ion-margin-bottom"],["slot","start","color","success","name","mail-outline"],["name","email","id","email","placeholder","Correo","type","Email","required","",3,"ngModel","ngModelChange"],["slot","start","color","success","name","keypad-outline"],["name","password","id","password","placeholder","Contrase\xf1a","type","password","required","",3,"ngModel","ngModelChange"],["color","success","expand","block","shape","round","type","submit",3,"disabled"]],template:function(n,t){if(1&n&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-buttons",1),c.Mb(3,"ion-button",2),c.Kb(4,"ion-back-button",3),c.Lb(),c.Lb(),c.Mb(5,"ion-buttons",4),c.Mb(6,"ion-button",5),c.hc(7,"Contactanos!"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(8,"ion-content"),c.Mb(9,"div",6),c.Mb(10,"h1"),c.hc(11,"Login"),c.Lb(),c.Kb(12,"img",7),c.Lb(),c.Mb(13,"form",8,9),c.Ub("ngSubmit",(function(){return t.loginuser()})),c.Mb(15,"ion-item",10),c.Kb(16,"ion-icon",11),c.Mb(17,"ion-input",12),c.Ub("ngModelChange",(function(n){return t.UserLogin.email=n})),c.Lb(),c.Lb(),c.Mb(18,"ion-item",10),c.Kb(19,"ion-icon",13),c.Mb(20,"ion-input",14),c.Ub("ngModelChange",(function(n){return t.UserLogin.password=n})),c.Lb(),c.Lb(),c.Mb(21,"ion-button",15),c.hc(22,"Login"),c.Lb(),c.Lb(),c.Lb()),2&n){const n=c.cc(14);c.zb(17),c.Zb("ngModel",t.UserLogin.email),c.zb(3),c.Zb("ngModel",t.UserLogin.password),c.zb(1),c.Zb("disabled",n.invalid)}},directives:[r.s,r.F,r.h,r.g,r.d,r.e,r.K,s.h,r.o,i.i,i.e,i.f,r.w,r.t,r.v,r.L,i.h,i.d,i.g],styles:["ion-toolbar[_ngcontent-%COMP%]{--background:#f8f8fa}ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{text-transform:none;font-size:17px}ion-content[_ngcontent-%COMP%]{--background:#f8f8fa}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#010100;margin-bottom:15%}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;border-radius:50%;border:8px solid #fff}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]{margin-top:15%;padding-left:30px;padding-right:30px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:35px;height:48px;font-size:18px;text-transform:none;border-radius:50px;box-shadow:1px 8px 8px 0 rgba(0,0,0,.05);--box-shadow:none}ion-item[_ngcontent-%COMP%]{border-radius:50px;height:55px;box-shadow:1px 8px 8px 0 rgba(0,0,0,.08);--highlight-height:0px}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:18px;--padding-top:20px;--padding-bottom:15px;--padding-start:5px}ion-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:17px;letter-spacing:.5px;text-decoration:none}"]}),n})()}];let l=(()=>{class n{}return n.\u0275mod=c.Hb({type:n}),n.\u0275inj=c.Gb({factory:function(t){return new(t||n)},imports:[[s.i.forChild(d)],s.i]}),n})(),h=(()=>{class n{}return n.\u0275mod=c.Hb({type:n}),n.\u0275inj=c.Gb({factory:function(t){return new(t||n)},imports:[[e.b,i.a,r.G,l]]}),n})()}}]);