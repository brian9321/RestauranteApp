{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{F4UR:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"LoginPageModule\",(function(){return login_module_LoginPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),auth_service=__webpack_require__(\"lGQG\");const routes=[{path:\"\",component:(()=>{class LoginPage{constructor(authService,toastController,loadingController,router){this.authService=authService,this.toastController=toastController,this.loadingController=loadingController,this.router=router,this.UserLogin={email:\"cliente@gmail.com\",password:\"holamundo\",gethash:\"true\"}}ngOnInit(){}ionViewWillEnter(){this.comprobarlogin()}comprobarlogin(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){!0===(yield this.authService.checkLogin)&&this.router.navigate([\"/home\"])}))}loginuser(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.presentLoading(\"Espere..\");const em=this.UserLogin.email.trim();this.UserLogin.email=em,console.log(this.UserLogin),yield this.authService.login(this.UserLogin).subscribe(res=>Object(tslib_es6.a)(this,void 0,void 0,(function*(){console.log(res),res<=1?(console.log(res),this.UserLogin.gethash=\"true\",this.presentToast(\"Error en el servidor\")):res.status||(this.user=res,this.UserLogin.gethash=\"\",this.authService.login(this.UserLogin).subscribe(usertoken=>{this.token=usertoken,this.token.length<=0?this.presentToast(\"Error en el servidor\"):(this.UserLogin.gethash=\"true\",this.loading.dismiss(),this.CrearSesion())},error=>{this.errorMessage=error,null!=this.errorMessage&&(this.loading.dismiss(),this.UserLogin.gethash=\"true\",this.presentToast(\"Error en el servidor\"))}))})),error=>{})}))}CrearSesion(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){yield this.authService.setUser(this.user),yield this.authService.setToken(this.token),yield this.comprobarlogin()}))}presentToast(msg){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:msg,duration:5e3})).present()}))}presentLoading(mensaje){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){return this.loading=yield this.loadingController.create({message:mensaje,translucent:!0,cssClass:\"custom-class custom-loading\",backdropDismiss:!0,mode:\"ios\"}),this.loading.present()}))}}return LoginPage.ɵfac=function(t){return new(t||LoginPage)(core.Jb(auth_service.a),core.Jb(ionic_angular.M),core.Jb(ionic_angular.I),core.Jb(router.g))},LoginPage.ɵcmp=core.Db({type:LoginPage,selectors:[[\"app-login\"]],decls:23,vars:3,consts:[[\"mode\",\"ios\",1,\"ion-no-border\"],[\"slot\",\"start\"],[\"color\",\"primary\"],[\"icon\",\"chevron-back\",\"defaultHref\",\"/\"],[\"slot\",\"end\"],[\"color\",\"primary\",\"routerLink\",\"/adduser\"],[\"id\",\"header\"],[\"src\",\"assets/logodx.png\"],[\"id\",\"form\",3,\"ngSubmit\"],[\"form\",\"ngForm\"],[1,\"ion-margin-bottom\"],[\"slot\",\"start\",\"color\",\"success\",\"name\",\"mail-outline\"],[\"name\",\"email\",\"id\",\"email\",\"placeholder\",\"Correo\",\"type\",\"Email\",\"required\",\"\",3,\"ngModel\",\"ngModelChange\"],[\"slot\",\"start\",\"color\",\"success\",\"name\",\"keypad-outline\"],[\"name\",\"password\",\"id\",\"password\",\"placeholder\",\"Contraseña\",\"type\",\"password\",\"required\",\"\",3,\"ngModel\",\"ngModelChange\"],[\"color\",\"success\",\"expand\",\"block\",\"shape\",\"round\",\"type\",\"submit\",3,\"disabled\"]],template:function(rf,ctx){if(1&rf&&(core.Mb(0,\"ion-header\",0),core.Mb(1,\"ion-toolbar\"),core.Mb(2,\"ion-buttons\",1),core.Mb(3,\"ion-button\",2),core.Kb(4,\"ion-back-button\",3),core.Lb(),core.Lb(),core.Mb(5,\"ion-buttons\",4),core.Mb(6,\"ion-button\",5),core.hc(7,\"Contactanos!\"),core.Lb(),core.Lb(),core.Lb(),core.Lb(),core.Mb(8,\"ion-content\"),core.Mb(9,\"div\",6),core.Mb(10,\"h1\"),core.hc(11,\"Login\"),core.Lb(),core.Kb(12,\"img\",7),core.Lb(),core.Mb(13,\"form\",8,9),core.Ub(\"ngSubmit\",(function(){return ctx.loginuser()})),core.Mb(15,\"ion-item\",10),core.Kb(16,\"ion-icon\",11),core.Mb(17,\"ion-input\",12),core.Ub(\"ngModelChange\",(function($event){return ctx.UserLogin.email=$event})),core.Lb(),core.Lb(),core.Mb(18,\"ion-item\",10),core.Kb(19,\"ion-icon\",13),core.Mb(20,\"ion-input\",14),core.Ub(\"ngModelChange\",(function($event){return ctx.UserLogin.password=$event})),core.Lb(),core.Lb(),core.Mb(21,\"ion-button\",15),core.hc(22,\"Login\"),core.Lb(),core.Lb(),core.Lb()),2&rf){const _r0=core.cc(14);core.zb(17),core.Zb(\"ngModel\",ctx.UserLogin.email),core.zb(3),core.Zb(\"ngModel\",ctx.UserLogin.password),core.zb(1),core.Zb(\"disabled\",_r0.invalid)}},directives:[ionic_angular.s,ionic_angular.F,ionic_angular.h,ionic_angular.g,ionic_angular.d,ionic_angular.e,ionic_angular.K,router.h,ionic_angular.o,fesm2015_forms.i,fesm2015_forms.e,fesm2015_forms.f,ionic_angular.w,ionic_angular.t,ionic_angular.v,ionic_angular.L,fesm2015_forms.h,fesm2015_forms.d,fesm2015_forms.g],styles:[\"ion-toolbar[_ngcontent-%COMP%]{--background:#f8f8fa}ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{text-transform:none;font-size:17px}ion-content[_ngcontent-%COMP%]{--background:#f8f8fa}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#010100;margin-bottom:15%}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;border-radius:50%;border:8px solid #fff}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]{margin-top:15%;padding-left:30px;padding-right:30px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:35px;height:48px;font-size:18px;text-transform:none;border-radius:50px;box-shadow:1px 8px 8px 0 rgba(0,0,0,.05);--box-shadow:none}ion-item[_ngcontent-%COMP%]{border-radius:50px;height:55px;box-shadow:1px 8px 8px 0 rgba(0,0,0,.08);--highlight-height:0px}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:18px;--padding-top:20px;--padding-bottom:15px;--padding-start:5px}ion-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:17px;letter-spacing:.5px;text-decoration:none}\"]}),LoginPage})()}];let login_routing_module_LoginPageRoutingModule=(()=>{class LoginPageRoutingModule{}return LoginPageRoutingModule.ɵmod=core.Hb({type:LoginPageRoutingModule}),LoginPageRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||LoginPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),LoginPageRoutingModule})(),login_module_LoginPageModule=(()=>{class LoginPageModule{}return LoginPageModule.ɵmod=core.Hb({type:LoginPageModule}),LoginPageModule.ɵinj=core.Gb({factory:function(t){return new(t||LoginPageModule)},imports:[[common.b,fesm2015_forms.a,ionic_angular.G,login_routing_module_LoginPageRoutingModule]]}),LoginPageModule})()}}]);","extractedComments":[]}